<!DOCTYPE html>
<html>
<head>
<title>Stop music</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="https://0o00.ru/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://0o00.ru/favicon-96x96.png">
</head>
<body>
<h1>Tap</h1>
<pre id="log"></pre>

<script>

document.addEventListener('click', playAudio);
const audio = document.createElement('audio');

function log(e) {
  const line = typeof e === 'string' ? e : e.message;
  document.querySelector('#log').textContent += line + '\n';
  console.log(line);
};

function playAudio() {
  audio.src = 'data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAAAAAAABkYXRhAAAAAA==';
  audio.play()
  .then(_ => location.reload())
  .catch(error => log(error));
}

navigator.mediaSession.setActionHandler('play', async function() {
  log('> User clicked "Play" icon.');
  playAudio();
});
</script>

</body>
</html>
